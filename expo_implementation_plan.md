1. Executive SummaryProduct Name: Freestyle Flow Trainer (Mobile V1)Platform: iOS & Android (via Expo / React Native)Orientation: Portrait Mode OnlyCore Value: A mobile practice tool that helps rappers improve their improvisation skills by providing a visual rhyming cue system synchronized to any YouTube instrumental via a manual "Tap Tempo" engine.2. User Flow (The "Happy Path")Launch: User opens the app.Setup:User selects Settings: "2-Syllable Words" and "AABB Pattern."User selects Game Mode: "Setup Punchline" (First line hidden, rhyme shown).Beat Selection: User pastes a YouTube link or selects a default "Boom Bap Instrumental."Synchronization:The video starts playing (audio on, video faded in background).User listens to the snare.User taps the big "TAP" button 4 times in rhythm.Gameplay:On the 4th tap, the Game Loop engages.The ball begins bouncing 4 beats per row.Rhymes appear. User raps along.Adjustment: If the beat drifts, the user hits the "TAP" button once to re-align the "One" (downbeat).3. Functional Requirements3.1 The Visual Metronome (The Ball)Physics: The ball must move smoothly (60fps). It cannot "teleport" or jitter.Pathing:Horizontal: Moves Left -> Right across 4 "Beat Markers" (Circles).Vertical:Measures 1-4 are stacked vertically.At the end of Measure 1 (Beat 4), the ball instantly jumps to the start of Measure 2 (Beat 1).Loop: At the end of Measure 4 (Beat 16), the ball jumps back to Measure 1 (Beat 1) and triggers a data refresh.3.2 The Audio Engine (YouTube + Tap Tempo)Video Player:Must use react-native-youtube-iframe.Visibility: zIndex: -1. Overlay a black view with opacity: 0.8 on top of it so the text pops, but the video movement is faintly visible.Controls: Play/Pause/Mute toggles.Tap Tempo Logic:Input: A circular button (>80px height) at the bottom.Calculation:Capture timestamps of the last 4 taps.Calculate the average duration (ms) between taps.BPM = 60000 / average_duration_ms.Phase Sync: The moment the final tap occurs is set as "Time Zero" (The Downbeat). The ball animation resets to Row 1, Beat 1 immediately to lock in with the user's rhythm.3.3 The Content Engine (Rhyme Logic)Data Source: A local JSON file (rhyme_data.json) containing "Rhyme Families."Filtering:Syllable Filter: User can toggle between 1-Syllable (e.g., Cat/Hat) and 2-Syllable (e.g., Treasure/Measure).Pattern Logic (The "Director"):AABB: Family X (Row 1, 2) + Family Y (Row 3, 4).ABAB: Family X (Row 1, 3) + Family Y (Row 2, 4).AAAA: Family X (Rows 1, 2, 3, 4).3.4 Game Modes (Difficulty)Based on your screenshots:Mode NameDescriptionRow 1 (Beat 4)Row 2 (Beat 4)Fully-FilledStandard practice.Show Word AShow Word A (Rhyme)Setup PunchlineUser invents the setup.Show ?Show Word A (Rhyme)Off The CliffUser invents the landing.Show Word AShow ?No WordsPure structure practice.Show ?Show ?4. Technical Specifications4.1 Tech StackFramework: React Native (Expo SDK 50+).Animation: react-native-reanimated (v3).Reasoning: We need access to the UI thread. The JS thread is too slow for music synchronization.State Management: Zustand (for global settings like BPM, Mode, and Syllable choice).Storage: AsyncStorage (to remember the user's last used settings).4.2 Data Schema (rhymes.json)The LLM should generate a mock file with this structure:JSON{
  "one_syllable": [
    { "id": "at", "words": ["Cat", "Bat", "Sat", "Flat", "Mat"] },
    { "id": "ight", "words": ["Light", "Fight", "Bright", "Night", "Sight"] }
  ],
  "two_syllable": [
    { "id": "ower", "words": ["Power", "Tower", "Sour", "Flower", "Hour"] },
    { "id": "ature", "words": ["Nature", "Major", "Wager", "Danger", "Stranger"] } 
    // Note: "Danger" is a slant rhyme for "Nature", explicitly allowed.
  ]
}
4.3 Component ArchitectureApp.js: Main entry, holds the Context providers.screens/GameScreen.js: The main controller.components/YoutubeLayer.js: Wraps the iframe, handles opacity.components/RhymeGrid.js: Renders the 4 rows of text.components/MetronomeBall.js: Critical Component. Contains the useSharedValue and useAnimatedStyle logic driven by the BPM.components/TapButton.js: Handles the touch events and math.5. UI/UX Specifications5.1 Visual StyleTheme: Dark Mode (Cyberpunk/Studio aesthetic).Colors:Background: #121212 (Almost Black).Active Row: #1F1F1F (Dark Grey).Ball: #00FF00 (Neon Green) or #00FFFF (Cyan).Text: White (Inter-Bold font).Highlight Text: Matches Ball Color.Typography: Large, readable sans-serif. Minimum 24sp for rhyme words.5.2 Layout (Portrait)Plaintext[Header: Back Icon | Settings Icon]
-----------------------------------
[Status Bar: "Mode: AABB" | "90 BPM"]
-----------------------------------
[ Row 1:  O  O  O  WORD ]
[ Row 2:  O  O  O  WORD ]
[ Row 3:  O  O  O  WORD ]
[ Row 4:  O  O  O  WORD ]
-----------------------------------
[ Spacer / Visualizer Graphic ]
-----------------------------------
[ ROUND TAP BUTTON (Pulsing) ]
[ Small Play/Pause Icon ]
6. Prompt for the LLMCopy and paste the following instruction block to your AI coding assistant (Cursor, Claude, or ChatGPT).Role: Senior React Native Engineer (Expo Specialist).Task: Build a functional prototype of "The Freestyle Flow Trainer" based on the following specifications.Core Context:This is a single-screen mobile app that acts as a visual metronome for rappers. It plays a YouTube video in the background and overlays a bouncing ball that hits targets in time with the user's manual "taps."Requirements:Project Setup:Use Expo (Managed Workflow).Use react-native-reanimated for the ball physics. This is mandatory. Do not use Animated from React Native.Use react-native-youtube-iframe.The Beat Logic (Tap Tempo):Create a hook useTapTempo.When the user taps the button 4 times, calculate the BPM.Crucial: Reset the ball's position to index 0 immediately on the 4th tap to sync the visual phase with the audio beat.The Visuals:Render 4 vertical rows. Each row has 4 horizontal beats.The ball moves: Row 1 (Beats 1-4) -> Row 2 (Beats 1-4) -> ... -> Row 4 -> Loop back to Row 1.The ball movement speed must change dynamically when the BPM changes.The Rhyme Engine:Create a robust mockData.js file with at least 10 "One Syllable" rhyme families and 10 "Two Syllable" rhyme families (including slant rhymes).Implement the Game Modes:FullyFilled: Show all 4 rhymes.SetupPunchline: Hide beats 4, 8, 12, 16 (the target rhymes) until the ball gets close? No, hide the Setup (Row 1, 3) and show the Punchline (Row 2, 4).OffTheCliff: Show Setup, Hide Punchline.Output:Provide the code for:App.js (Navigation & Layout)components/Metronome.tsx (Reanimated Logic)components/ControlPanel.tsx (Tap Button)data/rhymes.ts (The Mock Data)Styling:Make it look like a modern dark-mode music app. Neon accents on dark grey.